<div class="flex items-center justify-between mb-4 gap-4">
  <input
    type="text"
    class="border rounded px-3 py-2 w-full max-w-sm"
    placeholder="Search panels..."
    [(ngModel)]="search"
  />

  <div class="flex items-center gap-2">
    <button
      class="px-3 py-2 border rounded disabled:opacity-50"
      (click)="prevPage()"
      [disabled]="!canPrev()"
    >
      Prev
    </button>
    <button
      class="px-3 py-2 border rounded disabled:opacity-50"
      (click)="nextPage()"
      [disabled]="!canNext()"
    >
      Next
    </button>
  </div>
</div>

<div class="mt-8 flow-root">
  <div class="overflow-x-auto">
    <table class="min-w-full w-full table-auto divide-y divide-gray-200 text-sm">
      <thead>
        <tr>
          <th class="px-4 py-3 text-left font-semibold text-gray-700">Panel ID</th>
          <th class="px-4 py-3 text-left font-semibold text-gray-700">Installation Date</th>
          <th class="px-4 py-3 text-left font-semibold text-gray-700">Module Temperature (°C)</th>
          <th class="px-4 py-3 text-left font-semibold text-gray-700">Power Output (kW)</th>
          <th class="px-4 py-3 text-left font-semibold text-gray-700">Daily Energy (kWh)</th>
          <th class="px-4 py-3 text-left font-semibold text-gray-700">Location</th>
          <th class="px-4 py-3 text-left font-semibold text-gray-700">Status</th>
        </tr>
      </thead>

      <tbody class="divide-y divide-gray-200">
        @for (panel of pagedPanels(); track panel.id) {
          <tr>
            <td class="px-4 py-2 font-medium text-gray-900">{{ panel.name }}</td>
            <td class="px-4 py-2">{{ formatDate(panel.createdAt) }}</td>
            <td class="px-4 py-2">
              <ui-badge
                [text]="panel.temperature + '°C'"
                [color]="getTempColor(panel.temperature)"
              />
            </td>
            <td class="px-4 py-2">{{ panel.power }}</td>
            <td class="px-4 py-2">{{ panel.dailyEnergy }}</td>
            <td class="px-4 py-2">{{ panel.location }}</td>
            <td class="px-4 py-2">
              <ui-badge
                [text]="panel.power > 0 ? 'Active' : 'Offline'"
                [color]="panel.power > 0 ? 'green' : 'red'"
              />
            </td>
          </tr>
        }
      </tbody>
    </table>
  </div>

  <div class="mt-3 text-sm text-gray-600">
    <div>Showing {{ showingFrom() }} to {{ showingTo() }} of {{ totalItems }} entries</div>
  </div>
</div>
